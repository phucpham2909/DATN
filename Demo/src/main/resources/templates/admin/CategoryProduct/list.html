<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi"
      th:insert="~{/admin/layout/sidebar-layout::view(~{::title}, ~{::article})}">
<head>
<meta charset="UTF-8">
<title>Danh s√°ch danh m·ª•c s·∫£n ph·∫©m</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
	rel="stylesheet">
</head>
<body>
	<article>
		<div class="container mt-3">
			<h3 class="mb-3 mt-3">Danh s√°ch Danh m·ª•c s·∫£n ph·∫©m</h3>
			<!-- L·ªói -->
			<div th:if="${error}"
				class="alert alert-danger alert-dismissible fade show mt-2">
				<span th:text="${error}"></span>
				<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
			</div>

			<!-- Th√†nh c√¥ng -->
			<div th:if="${success}"
				class="alert alert-success alert-dismissible fade show mt-2">
				<span th:text="${success}"></span>
				<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
			</div>
			<div class="d-flex justify-content-between mb-3">

				<form th:action="@{/admin/category-product}" method="get"
					class="d-flex align-items-center mb-3">
					<input type="text" name="keyword" th:value="${keyword}"
						class="form-control me-2" placeholder="T√¨m theo t√™n danh m·ª•c...">
					<input type="hidden" name="sort"
						th:value="${sort == 'asc' ? 'desc' : 'asc'}" />
					<button type="submit" class="btn btn-outline-primary me-2"
						style="min-width: 80px; padding: 0.375rem 0.75rem;">
						<span th:text="${sort == 'asc' ? 'A-Z' : 'Z-A'}"></span>
					</button>
					<button class="btn btn-outline-primary" type="submit">üîç</button>
				</form>

				<form th:object="${category}"
					th:action="@{/admin/category-product/add}" method="post"
					class="d-flex align-items-start"
					style="gap: 0.5rem; min-width: 300px;">

					<input type="hidden" th:field="*{id}" />

					<div class="d-flex flex-column" style="flex: 1;">
						<input type="text" th:field="*{name}" class="form-control"
							placeholder="T√™n danh m·ª•c..." />
						<div style="min-height: 1.5em;">
							<span class="text-danger" th:if="${#fields.hasErrors('name')}"
								th:errors="*{name}"></span>
						</div>
					</div>

					<button class="btn btn-primary" th:if="${category.id == null}"
						type="submit">Th√™m</button>

					<button class="btn btn-success" th:if="${category.id != null}"
						th:formaction="@{/admin/category-product/edit}" type="submit">L∆∞u</button>

					<a class="btn btn-secondary" th:if="${category.id != null}"
						th:href="@{/admin/category-product}">H·ªßy</a>
				</form>

			</div>

			<div class="table-responsive">
				<table class="table table-striped">
					<thead class="table-dark">
						<tr>
							<th style="width: 5%;">STT</th>
							<th style="width: 85%;">T√™n danh m·ª•c</th>
							<th style="width: 10%;">Thao t√°c</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="cat, iterStat : ${list}">
							<td th:text="${iterStat.index + 1}"></td>
							<td th:text="${cat.name}"></td>
							<td><a
								th:href="@{'/admin/category-product/edit/' + ${cat.id}}"
								class="btn btn-warning btn-sm">S·ª≠a</a> <a
								th:href="@{'/admin/category-product/delete/' + ${cat.id}}"
								class="btn btn-danger btn-sm"
								onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a?')">X√≥a</a></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<nav class="mt-3" th:if="${categories.totalPages > 0}">
			<ul class="pagination justify-content-center">
				<li class="page-item"
					th:classappend="${categories.first} ? 'disabled'"><a
					class="page-link" th:href="@{/admin/category-product?page=0}">Trang
						ƒë·∫ßu</a></li>
				<li class="page-item"
					th:classappend="${categories.first} ? 'disabled'"><a
					class="page-link"
					th:href="@{/admin/category-product(page=${categories.number > 0 ? categories.number - 1 : 0}, keyword=${keyword}, sort=${sort})}">Trang
						tr∆∞·ªõc</a></li>
				<li class="page-item disabled"><span class="page-link">Trang
						[[${categories.number + 1}]] / [[${categories.totalPages}]]</span></li>
				<li class="page-item"
					th:classappend="${categories.last} ? 'disabled'"><a
					class="page-link"
					th:href="@{/admin/category-product(page=${categories.number + 1 < categories.totalPages ? categories.number + 1 : categories.number}, keyword=${keyword}, sort=${sort})}">Trang
						k·∫ø</a></li>
				<li class="page-item"
					th:classappend="${categories.last} ? 'disabled'"><a
					class="page-link"
					th:href="@{/admin/category-product(page=${categories.totalPages - 1}, keyword=${keyword}, sort=${sort})}">Trang
						cu·ªëi</a></li>
			</ul>
		</nav>
	</article>
</body>
</html>
