<!DOCTYPE html>
<html
	th:replace="~{/admin/layout/sidebar-layout::view(~{::title}, ~{::article})}"
	xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Qu·∫£n l√Ω t√†i kho·∫£n</title>

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
	rel="stylesheet">

<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
	<article>
		<div class="container mt-3">
		<h3 class="mt-3 mb-3">Qu·∫£n l√Ω t√†i kho·∫£n</h3>
			<form class="d-flex mb-4" method="get"
				th:action="@{/admin/account-manager}">
				<input class="form-control me-2" type="search" name="keyword"
					th:value="${keyword}" placeholder="T√¨m theo t√™n ho·∫∑c email">
				<button class="btn btn-outline-primary" type="submit">üîç</button>
			</form>

			<table class="table table-striped align-middle">
				<thead class="table-dark">
					<tr>
						<th>ID</th>
						<th>T√™n</th>
						<th>Email</th>
						<th>Tr·∫°ng th√°i</th>
						<th>H√†nh ƒë·ªông</th>
					</tr>
				</thead>

				<tbody>
					<tr>
						<td th:text="${currentUser.id}"></td>
						<td th:text="${currentUser.fullname}"></td>
						<td th:text="${currentUser.email}"></td>
						<td th:text="${currentUser.status ? 'ƒêang ho·∫°t ƒë·ªông' : 'ƒê√£ kh√≥a'}"></td>
						<td>
							<button class="btn btn-secondary" disabled>B·∫°n</button>
						</td>
					</tr>

					<tr th:each="item : ${accounts.content}">
						<td th:text="${item.id}"></td>
						<td th:text="${item.fullname}"></td>
						<td th:text="${item.email}"></td>
						<td th:text="${item.status ? 'ƒêang ho·∫°t ƒë·ªông' : 'ƒê√£ kh√≥a'}"></td>

						<td>
							<form method="post" th:action="@{/admin/account-manager}">
								<input type="hidden" name="id" th:value="${item.id}" /> <input
									type="hidden" name="newStatus" th:value="${!item.status}" />

								<button type="submit"
									th:class="${item.status ? 'btn btn-danger' : 'btn btn-success'}"
									th:text="${item.status ? 'Kh√≥a' : 'M·ªü kh√≥a'}"></button>
							</form>
						</td>
					</tr>

				</tbody>
			</table>
			<nav class="mt-4" th:if="${accounts.totalPages >= 1}">
				<ul class="pagination justify-content-center">

					<li class="page-item"
						th:classappend="${accounts.first} ? 'disabled'"><a
						class="page-link"
						th:href="@{/admin/account-manager(page=0, keyword=${keyword != null ? keyword : ''})}">
							Trang ƒë·∫ßu </a></li>

					<li class="page-item"
						th:classappend="${accounts.first} ? 'disabled'"><a
						class="page-link"
						th:href="@{/admin/account-manager(page=${accounts.number > 0 ? accounts.number - 1 : 0}, keyword=${keyword != null ? keyword : ''})}">
							Trang tr∆∞·ªõc </a></li>

					<li class="page-item disabled"><span class="page-link">
							Trang [[${accounts.number + 1}]] / [[${accounts.totalPages}]] </span></li>

					<li class="page-item"
						th:classappend="${accounts.last} ? 'disabled'"><a
						class="page-link"
						th:href="@{/admin/account-manager(page=${accounts.number + 1 < accounts.totalPages ? accounts.number + 1 : accounts.number}, keyword=${keyword != null ? keyword : ''})}">
							Trang k·∫ø </a></li>

					<li class="page-item"
						th:classappend="${accounts.last} ? 'disabled'"><a
						class="page-link"
						th:href="@{/admin/account-manager(page=${accounts.totalPages - 1}, keyword=${keyword != null ? keyword : ''})}">
							Trang cu·ªëi </a></li>

				</ul>
			</nav>
		</div>
	</article>
</body>
</html>
