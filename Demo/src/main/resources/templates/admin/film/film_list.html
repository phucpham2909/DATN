<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	th:replace="~{/admin/layout/sidebar-layout::view(~{::title}, ~{::article})}">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Danh s√°ch Phim</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
	crossorigin="anonymous">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
	crossorigin="anonymous"></script>
</head>
<body>
	<article>
		<div class="container mt-3">
			<h3 class="mb-3 mt-3">Danh s√°ch Phim</h3>
			<div class="d-flex justify-content-between mb-3">

				<form th:action="@{/admin/film/list}" method="get"
					class="d-flex align-items-center mb-3">
					<input type="text" name="keyword" th:value="${keyword}"
						class="form-control me-2" placeholder="T√¨m theo t√™n phim...">
					<input type="hidden" name="sort"
						th:value="${sort == 'asc' ? 'desc' : 'asc'}" />
					<button type="submit" class="btn btn-outline-primary me-2"
						style="min-width: 80px; padding: 0.375rem 0.75rem;">
						<span th:text="${sort == 'asc' ? 'A-Z' : 'Z-A'}"></span>
					</button>
					<button class="btn btn-outline-primary" type="submit">üîç</button>
				</form>
				<div class="d-flex align-items-center">
					<a href="/admin/film/add" class="btn btn-primary">Th√™m
						phim m·ªõi</a>
				</div>
			</div>

			<div class="table-responsive">
				<table class="table table-hover table-striped align-middle">
					<thead class="table-dark">
						<tr>
							<th style="width: 5%;">STT</th>
							<th style="width: 10%;">Avatar</th>
							<th style="width: 30%;">T√™n Phim</th>
							<th style="width: 30%;">Th·ªÉ lo·∫°i</th>
							<th style="width: 15%;">Tr·∫°ng th√°i</th>
							<th style="width: 10%;">Thao t√°c</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="film, iterStat : ${films.content}">
							<td th:text="${iterStat.index + 1 + (films.number * films.size)}"></td>

							<td><img
								th:if="${film.avatar != null and !#strings.isEmpty(film.avatar)}"
								th:src="@{'/film-images/' + ${film.avatar}}" alt="Avatar"
								class="img-thumbnail"
								style="width: 60px; height: 80px; object-fit: cover;"
								onerror="this.src='https://via.placeholder.com/60x80?text=No+Image'">
								<img
								th:unless="${film.avatar != null and !#strings.isEmpty(film.avatar)}"
								src="https://via.placeholder.com/60x80?text=No+Image"
								alt="No Image" class="img-thumbnail"
								style="width: 60px; height: 80px; object-fit: cover;"></td>

							<td><strong th:text="${film.name}"></strong></td>

							<td><small class="text-muted"
								th:text="'(' + ${#lists.size(film.categoryFilm)} + ' th·ªÉ lo·∫°i)'"></small>
								<div
									th:if="${film.categoryFilm != null and !#lists.isEmpty(film.categoryFilm)}">
									<span th:each="cf, iterCat : ${film.categoryFilm}"> <span
										class="badge bg-info text-dark"
										th:text="${cf.categories.name}"></span> <span
										th:if="${!iterCat.last}"> </span>
									</span>
								</div> <span
								th:unless="${film.categoryFilm != null and !#lists.isEmpty(film.categoryFilm)}"
								class="text-muted fst-italic">Ch∆∞a c√≥ th·ªÉ lo·∫°i</span></td>

							<td><span th:if="${film.status == 1}"
								class="badge bg-success">ƒêang chi·∫øu</span> <span
								th:if="${film.status == 2}" class="badge bg-warning text-dark">S·∫Øp
									chi·∫øu</span> <span th:if="${film.status == 3}" class="badge bg-danger">Ng·ª´ng
									chi·∫øu</span></td>

							<td><a th:href="@{/admin/film/edit/{id}(id=${film.id})}"
								class="btn btn-sm btn-warning">S·ª≠a</a> <a
								th:href="@{/admin/film/delete/{id}(id=${film.id})}"
								class="btn btn-sm btn-danger"
								onclick="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a phim n√†y?')">X√≥a</a>
							</td>
						</tr>

						<tr th:if="${#lists.isEmpty(films.content)}">
							<td colspan="6" class="text-center text-muted py-4">Kh√¥ng c√≥
								phim n√†o</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<nav class="mt-3" th:if="${films.totalPages > 0}">
			<ul class="pagination justify-content-center">
				<li class="page-item" th:classappend="${films.first} ? 'disabled'"><a
					class="page-link" th:href="@{/admin/film/list(page=0, keyword=${keyword}, sort=${sort})}">Trang ƒë·∫ßu</a></li>
				<li class="page-item" th:classappend="${films.first} ? 'disabled'"><a
					class="page-link"
					th:href="@{/admin/film/list(page=${films.number > 0 ? films.number - 1 : 0}, keyword=${keyword}, sort=${sort})}">Trang
						tr∆∞·ªõc</a></li>
				<li class="page-item disabled"><span class="page-link">Trang
						[[${films.number + 1}]] / [[${films.totalPages}]]</span></li>
				<li class="page-item" th:classappend="${films.last} ? 'disabled'"><a
					class="page-link"
					th:href="@{/admin/film/list(page=${films.number + 1 < films.totalPages ? films.number + 1 : films.number}, keyword=${keyword}, sort=${sort})}">Trang
						k·∫ø</a></li>
				<li class="page-item" th:classappend="${films.last} ? 'disabled'"><a
					class="page-link"
					th:href="@{/admin/film/list(page=${films.totalPages - 1}, keyword=${keyword}, sort=${sort})}">Trang
						cu·ªëi</a></li>
			</ul>
		</nav>
	</article>
</body>
</html>