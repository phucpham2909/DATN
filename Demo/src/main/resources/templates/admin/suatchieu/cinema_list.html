<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi"
	th:replace="~{/admin/layout/sidebar-layout::view(~{::title}, ~{::article})}">
<head>
<meta charset="UTF-8">
<title>Danh s√°ch R·∫°p Chi·∫øu</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
	rel="stylesheet">
</head>
<body>
	<article>

		<div class="container mt-3">
			<h3 class="mb-3 mt-3">Danh s√°ch R·∫°p Chi·∫øu</h3>

			<div class="mb-3">
				<form th:object="${cinema}" th:action="@{/admin/cinema/add}"
					method="post" class="row g-2">

					<input type="hidden" th:field="*{id}" />

					<div class="col-md-4">
						<input type="text" th:field="*{name}" class="form-control"
							placeholder="T√™n chi nh√°nh..." /> <span
							th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="text-danger"></span>

					</div>

					<div class="col-md-6">
						<input type="text" th:field="*{dress}" class="form-control"
							placeholder="ƒê·ªãa ch·ªâ chi nh√°nh..." /> <span
							th:if="${#fields.hasErrors('dress')}" class="text-danger" th:errors="*{dress}"></span>

					</div>

					<div class="col-md-2 d-flex gap-2">
						<button class="btn btn-primary w-100" style="height: 37.6px" th:if="${cinema.id == null}"
							type="submit">Th√™m</button>

						<button class="btn btn-success w-100" style="height: 37.6px" th:if="${cinema.id != null}"
							th:formaction="@{/admin/cinema/edit}" type="submit">L∆∞u</button>

						<a class="btn btn-secondary w-100" style="height: 37.6px" th:if="${cinema.id != null}"
							th:href="@{/admin/cinema/list}">H·ªßy</a>
					</div>
				</form>
			</div>

			<div class="d-flex justify-content-between mb-3">

				<form th:action="@{/admin/cinema/list}" method="get"
					class="d-flex align-items-center mb-3 w-50">

					<input type="text" name="keyword" th:value="${keyword}"
						class="form-control me-2" placeholder="T√¨m theo t√™n chi nh√°nh...">

					<input type="hidden" name="sort"
						th:value="${sort == 'asc' ? 'desc' : 'asc'}" />

					<button type="submit" class="btn btn-outline-primary me-2"
						style="min-width: 80px;">
						<span th:text="${sort == 'asc' ? 'A-Z' : 'Z-A'}"></span>
					</button>

					<button class="btn btn-outline-primary" type="submit">üîç</button>
				</form>

			</div>


			<div th:if="${errorMessage}" class="alert alert-danger"
				th:text="${errorMessage}"></div>

			<div class="table-responsive">
				<table class="table table-striped align-middle">
					<thead class="table-dark">
						<tr>
							<th style="width: 5%;">STT</th>
							<th style="width: 35%;">T√™n Chi nh√°nh</th>
							<th style="width: 50%;">ƒê·ªãa Ch·ªâ</th>
							<th style="width: 10%;">Thao T√°c</th>
						</tr>
					</thead>

					<tbody>
						<tr th:each="c, iterStat : ${cinemas.content}">
							<td
								th:text="${iterStat.index + 1 + (cinemas.number * cinemas.size)}"></td>
							<td th:text="${c.name}"></td>
							<td th:text="${c.dress}"></td>

							<td><a th:href="@{'/admin/cinema/edit/' + ${c.id}}"
								class="btn btn-warning btn-sm">S·ª≠a</a> <a
								th:href="@{'/admin/cinema/delete/' + ${c.id}}"
								class="btn btn-danger btn-sm"
								onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a?')">X√≥a</a></td>
						</tr>

						<tr th:if="${#lists.isEmpty(cinemas.content)}">
							<td colspan="4" class="text-center text-muted py-4">Kh√¥ng c√≥
								r·∫°p chi·∫øu n√†o</td>
						</tr>
					</tbody>
				</table>
			</div>

		</div>

		<nav class="mt-3" th:if="${cinemas.totalPages > 0}">
			<ul class="pagination justify-content-center">

				<li class="page-item" th:classappend="${cinemas.first} ? 'disabled'">
					<a class="page-link"
					th:href="@{/admin/cinema/list(page=0, keyword=${keyword}, sort=${sort})}">
						Trang ƒë·∫ßu </a>
				</li>

				<li class="page-item" th:classappend="${cinemas.first} ? 'disabled'">
					<a class="page-link"
					th:href="@{/admin/cinema/list(page=${cinemas.number - 1}, keyword=${keyword}, sort=${sort})}">
						Trang tr∆∞·ªõc </a>
				</li>

				<li class="page-item disabled"><span class="page-link">
						Trang [[${cinemas.number + 1}]] / [[${cinemas.totalPages}]] </span></li>

				<li class="page-item" th:classappend="${cinemas.last} ? 'disabled'">
					<a class="page-link"
					th:href="@{/admin/cinema/list(page=${cinemas.number + 1}, keyword=${keyword}, sort=${sort})}">
						Trang k·∫ø </a>
				</li>

				<li class="page-item" th:classappend="${cinemas.last} ? 'disabled'">
					<a class="page-link"
					th:href="@{/admin/cinema/list(page=${cinemas.totalPages - 1}, keyword=${keyword}, sort=${sort})}">
						Trang cu·ªëi </a>
				</li>

			</ul>
		</nav>

	</article>
</body>
</html>
