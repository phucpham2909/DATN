<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi"
	th:replace="~{/admin/layout/sidebar-layout::view(~{::title}, ~{::article})}">
<head>
<meta charset="UTF-8">
<title>Qu·∫£n l√Ω Ph√≤ng Chi·∫øu</title>

<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
	rel="stylesheet">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
	<article>
		<div class="container mt-3">
			<h3 class="mb-3">Qu·∫£n l√Ω Ph√≤ng Chi·∫øu</h3>
			<div class="mb-4">
				<form th:object="${room}"
					th:action="${room != null && room.id != null ? '/admin/room/edit' : '/admin/room/add'}"
					method="post" class="row g-3">

					<input type="hidden" th:field="*{id}" />
					<div class="col-md-3">
						<input type="text" th:field="*{name}" class="form-control"
							placeholder="T√™n ph√≤ng..." />

						<!-- Hi·ªÉn th·ªã l·ªói name -->
						<small class="text-danger" th:if="${#fields.hasErrors('name')}"
							th:errors="*{name}"> </small>
					</div>

					<div class="col-md-6">
						<select th:field="*{cinema.id}" class="form-select">
							<option value="">-- Ch·ªçn chi nh√°nh --</option>
							<option th:each="c : ${cinemas}" th:value="${c.id}"
								th:text="${c.name}"></option>
						</select>

						<!-- Hi·ªÉn th·ªã l·ªói cinema -->
						<small class="text-danger"
							th:if="${#fields.hasErrors('cinema.id')}"
							th:errors="*{cinema.id}"> </small>
					</div>
					<div class="col-md-3 d-flex">
						<button type="submit" class="btn btn-primary w-100 me-2" style="height: 37.6px"
							th:if="${room == null || room.id == null}">Th√™m</button>
						<button type="submit" class="btn btn-success w-100 me-2" style="height: 37.6px"
							th:if="${room != null && room.id != null}">L∆∞u</button>
						<a th:if="${room != null && room.id != null}"
							th:href="@{/admin/room/list}" class="btn btn-secondary w-100" style="height: 37.6px">
							H·ªßy </a>
					</div>

				</form>
			</div>
			<div class="d-flex justify-content-between mb-3">

				<form th:action="@{/admin/room/list}" method="get"
					class="d-flex align-items-center mb-3 w-50">
					<input type="text" name="keyword" th:value="${keyword}"
						class="form-control me-2" placeholder="T√¨m theo t√™n chi nh√°nh...">
					<input type="hidden" name="sort"
						th:value="${sort == 'asc' ? 'desc' : 'asc'}" />
					<button type="submit" class="btn btn-outline-primary me-2"
						style="min-width: 80px; padding: 0.375rem 0.75rem;">
						<span th:text="${sort == 'asc' ? 'A-Z' : 'Z-A'}"></span>
					</button>
					<button class="btn btn-outline-primary" type="submit">üîç</button>
				</form>

			</div>
			<div class="table-responsive">
				<table class="table table-hover table-striped align-middle">
					<thead class="table-dark">
						<tr>
							<th>STT</th>
							<th>T√™n Ph√≤ng</th>
							<th>Chi Nh√°nh</th>
							<th>Thao T√°c</th>
						</tr>
					</thead>

					<tbody>

						<tr th:each="room, iterStat : ${rooms.content}">
							<td th:text="${iterStat.index + 1 + (rooms.number * rooms.size)}"></td>
							<td th:text="${room.name}"></td>
							<td th:text="${room.cinema.name}"></td>

							<td><a th:href="@{/admin/room/list(id=${room.id})}"
								class="btn btn-sm btn-warning">S·ª≠a</a>

								<form th:action="@{/admin/room/delete/{id}(id=${room.id})}"
									method="post" style="display: inline;"
									onsubmit="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a ph√≤ng n√†y?');">
									<button class="btn btn-sm btn-danger">X√≥a</button>
								</form></td>
						</tr>

						<tr th:if="${#lists.isEmpty(rooms.content)}">
							<td colspan="4" class="text-center text-muted py-4">Kh√¥ng c√≥
								ph√≤ng n√†o</td>
						</tr>

					</tbody>
				</table>
			</div>
			<nav class="mt-4" th:if="${rooms.totalPages >= 1}">
				<ul class="pagination justify-content-center">

					<li class="page-item" th:classappend="${rooms.first} ? 'disabled'">
						<a class="page-link"
						th:href="@{/admin/room/list(page=0, keyword=${keyword})}">
							Trang ƒë·∫ßu </a>
					</li>

					<li class="page-item" th:classappend="${rooms.first} ? 'disabled'">
						<a class="page-link"
						th:href="@{/admin/room/list(page=${rooms.number - 1}, keyword=${keyword})}">
							Trang tr∆∞·ªõc </a>
					</li>

					<li class="page-item disabled"><span class="page-link">
							Trang [[${rooms.number + 1}]] / [[${rooms.totalPages}]] </span></li>

					<li class="page-item" th:classappend="${rooms.last} ? 'disabled'">
						<a class="page-link"
						th:href="@{/admin/room/list(page=${rooms.number + 1}, keyword=${keyword})}">
							Trang k·∫ø </a>
					</li>

					<li class="page-item" th:classappend="${rooms.last} ? 'disabled'">
						<a class="page-link"
						th:href="@{/admin/room/list(page=${rooms.totalPages - 1}, keyword=${keyword})}">
							Trang cu·ªëi </a>
					</li>

				</ul>
			</nav>

		</div>
	</article>
</body>
</html>
