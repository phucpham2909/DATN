<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi"
	th:replace="~{/admin/layout/sidebar-layout::view(~{::title}, ~{::article})}">
<head>
<meta charset="UTF-8">
<title>Danh s√°ch Su·∫•t Chi·∫øu</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
	rel="stylesheet">
</head>
<body>
	<article>
		<div class="container mt-3">
			<h3 class="mb-3">Danh s√°ch Su·∫•t Chi·∫øu</h3>

			<form class="row g-3 mb-3" th:action="@{/admin/suatchieu/list}"
				method="get">
				<div class="col-auto d-flex align-items-center">
					<input type="text" class="form-control" name="filmName"
						placeholder="T√™n phim..." th:value="${filmName}">
				</div>
				<div class="col-auto d-flex align-items-center">
					<button class="btn btn-outline-primary" type="submit">üîç</button>
				</div>
				<div class="col-auto d-flex align-items-center">
					<span class="me-2">T·ª´:</span> <input type="date"
						class="form-control" name="fromDate" th:value="${fromDate}">
				</div>
				<div class="col-auto d-flex align-items-center">
					<span class="me-2">ƒë·∫øn:</span> <input type="date"
						class="form-control" name="toDate" th:value="${toDate}">
				</div>
				<div class="col-auto d-flex align-items-center">
					<a href="/admin/suatchieu/list" class="btn btn-secondary">Reset</a>
				</div>
				<div class="col-auto d-flex align-items-center ms-auto">
					<a href="/admin/suatchieu/add" class="btn btn-primary">Th√™m
						su·∫•t chi·∫øu m·ªõi</a>
				</div>
			</form>

			<div class="table-responsive">
				<table class="table table-hover table-striped align-middle">
					<thead class="table-dark">
						<tr>
							<th>STT</th>
							<th>Ng√†y</th>
							<th>Gi·ªù b·∫Øt ƒë·∫ßu</th>
							<th>Gi·ªù k·∫øt th√∫c</th>
							<th>Phim</th>
							<th>Ph√≤ng</th>
							<th>Thao t√°c</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="sc, iterStat : ${suatChieuPage.content}">
							<td
								th:text="${iterStat.index + 1 + (suatChieuPage.number * suatChieuPage.size)}"></td>
							<td
								th:text="${sc.date != null ? #temporals.format(sc.date,'dd/MM/yyyy') : ''}"></td>
							<td
								th:text="${sc.gioBatDau != null ? sc.gioBatDau.format(T(java.time.format.DateTimeFormatter).ofPattern('HH:mm')) : ''}"></td>
							<td
								th:text="${sc.gioKetThuc != null ? sc.gioKetThuc.format(T(java.time.format.DateTimeFormatter).ofPattern('HH:mm')) : ''}"></td>
							<td
								th:text="${sc.detailFilm != null && sc.detailFilm.film != null ? sc.detailFilm.film.name : ''}"></td>
							<td th:text="${sc.room != null ? sc.room.name : ''}"></td>
							<td><a th:href="@{/admin/suatchieu/edit/{id}(id=${sc.id})}"
								class="btn btn-sm btn-warning">S·ª≠a</a> <a
								th:href="@{/admin/suatchieu/delete/{id}(id=${sc.id})}"
								class="btn btn-sm btn-danger"
								onclick="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a su·∫•t chi·∫øu n√†y?')">X√≥a</a>
							</td>
						</tr>
						<tr th:if="${#lists.isEmpty(suatChieuPage.content)}">
							<td colspan="7" class="text-center text-muted py-4">Kh√¥ng c√≥
								su·∫•t chi·∫øu n√†o</td>
						</tr>
					</tbody>
				</table>
			</div>

			<!-- Pagination -->
			<nav class="mt-4" th:if="${suatChieuPage.totalPages > 0}">
				<ul class="pagination justify-content-center">
					<li class="page-item"
						th:classappend="${suatChieuPage.first} ? 'disabled'"><a
						class="page-link"
						th:href="@{/admin/suatchieu/list(page=0, filmName=${filmName}, fromDate=${fromDate}, toDate=${toDate})}">Trang
							ƒë·∫ßu</a></li>
					<li class="page-item"
						th:classappend="${suatChieuPage.first} ? 'disabled'"><a
						class="page-link"
						th:href="@{/admin/suatchieu/list(page=${suatChieuPage.number > 0 ? suatChieuPage.number - 1 : 0}, filmName=${filmName}, fromDate=${fromDate}, toDate=${toDate})}">Trang
							tr∆∞·ªõc</a></li>
					<li class="page-item disabled"><span class="page-link">Trang
							[[${suatChieuPage.number + 1}]] / [[${suatChieuPage.totalPages}]]</span></li>
					<li class="page-item"
						th:classappend="${suatChieuPage.last} ? 'disabled'"><a
						class="page-link"
						th:href="@{/admin/suatchieu/list(page=${suatChieuPage.number + 1 < suatChieuPage.totalPages ? suatChieuPage.number + 1 : suatChieuPage.number}, filmName=${filmName}, fromDate=${fromDate}, toDate=${toDate})}">Trang
							k·∫ø</a></li>
					<li class="page-item"
						th:classappend="${suatChieuPage.last} ? 'disabled'"><a
						class="page-link"
						th:href="@{/admin/suatchieu/list(page=${suatChieuPage.totalPages - 1}, filmName=${filmName}, fromDate=${fromDate}, toDate=${toDate})}">Trang
							cu·ªëi</a></li>
				</ul>
			</nav>

		</div>
	</article>
</body>
</html>
